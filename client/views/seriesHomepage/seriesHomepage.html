<template name="seriesHomepage">

    {{#with currentSeries}}

        <div class="series-background" style="background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url('{{backdrop.url}}') no-repeat; background-size: cover; background-position: center top;">
            <div class="ui series-page stackable container inverted grid">
                <div class="four wide computer tablet only column">
                    <img src="{{poster.url}}">
                </div>
                <div class="ui twelve wide computer sixteen wide tablet column">
                    <div class="ui centered huge inverted header">{{title}}
                        <div class="sub header">({{startDateFormatted}})</div>
                    </div>
                    <p class="ui inverted description">{{{description}}}</p>
                </div>

                {{#if seriesArcs}}
                    <div class="ui sixteen wide column computer tablet only segment">
                        {{#each seriesArcs}}
                            {{> singleArcButton }}
                        {{/each}}

                        {{#if currentUser }}
                            <div class="ui centered relaxed grid" id="new-tag-column">
                                <div class="ui right labeled left icon input">
                                    <i class="tags icon"></i>
                                    <input id="newTagInputTitle" type="text" placeholder="title">
                                    <input id="newTagInputColour" type="text" placeholder="colour">
                                    <input id="newTagInputDescription" type="text" placeholder="description">
                                    <a id="newTagSubmit" class="ui tag label">
                                        add tag
                                    </a>
                                </div>
                            </div>
                        {{/if}}

                    </div>
                {{/if}}

                <div class="ui series-page stackable container grid">
                    <div class="ui sixteen wide column">
                        <div class="ui centered container">
                            <br/>
                            <br/>
                            <div class="ui accordion">
                                {{#each filteredEpisodes}}
                                    {{> singleEpisode }}
                                {{/each}}
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    {{/with}}
</template>

<template name="singleEpisode">
    <div class="title">
        <div class="ui grid">
            <div class="ui two wide computer five wide mobile three wide tablet column">
                <span class="season-icon">S {{season}}</span><br/><span class="season-icon">E {{number}}</span>
            </div>
            <div class="ui nine wide computer eleven wide mobile eight wide tablet column">
                <span class="ui medium header">{{title}}</span>
            </div>

            {{#if episodeArcs }}
                <div class="ui five wide computer sixteen wide mobile five wide tablet right aligned column">
                    {{#each episodeArcs}}
                        {{> singleArcLabel }}
                    {{/each}}
                </div>
            {{/if}}
        </div>
    </div>
    <div class="content">
        <p>{{{description}}}</p>
        {{#if currentUser }}
            <div class="ui four column right aligned doubling grid">
                <div class="sixteen wide column">
                    {{#if episodeArcChoices }}
                        <div>Add Arc to Episode</div>
                        {{#each episodeArcChoices}}
                            {{> addArcDropdown }}
                        {{/each}}
                    {{/if}}
                </div>
            </div>
        {{/if}}
    </div>

    <div class="ui section divider"></div>
</template>

<template name="singleArcButton">
    <span class="ui small {{colour}} arc inverted button" id="{{_id}}">{{title}}</span> {{{description}}}
    <div class="ui section divider"></div>
</template>

<template name="singleArcLabel">
    <span class="ui mini {{colour}} arc tag label">{{title}}</span>
</template>

<template name="addArcDropdown">
    <a value="{{slug}}" class="ui {{colour}} circular label addArcButton">{{title}}</a>
</template>